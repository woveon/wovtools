#!/usr/bin/env bash

DOECHO=1
FOLD=140

if [ ! -e ${HOME}/.wovtools ]; then 
  printf "\n\nERROR: no .wovtools file in home directory.\n" 1>&2
fi

if [ "$#" == 1 ]; then

  P=$(echo $1 | cut -d'/' -f1)
  D=$(jq -r ".projects.$P.dir" ${HOME}/.wovtools 2> /dev/null)
  if [ "$?" != "0" ]; then
    printf "\nERROR: json related error. Check your ~/.wovtools file.\n" 1>&2
    printf " - $(jq -r ".projects.$P.dir" ${HOME}/.wovtools 2>&1)\n" 1>&2
  else
    if [ "$D" == "null" ]; then 
      printf "\n\nERROR: no project entry of '$P'.\n" 1>&2
    else
      D1=( ${1//\// } )
      D1=( "${D1[@]:1:}" )
      GO="$D$D1"
      if [ ! -e "${D}${D1}" ]; then
        printf "\n\nERROR: no directory '$D$D1'.\n" 1>&2
      else
        cd $GO
        printf "\n---- project '$P' : $GO\n"
        sleep .5
        ls
      fi
    fi
  fi
else
  printf "\n\nERROR: bad number of parameters. Requires a project name.\n" 1>&2
fi



