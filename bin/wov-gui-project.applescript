use AppleScript version "2.4" -- Yosemite (10.10) or lateruse scripting additionsdo shell script "/usr/local/bin/kubectl config current-context"set curcontext to resultdo shell script "/usr/local/bin/kubectl config view -o json | /usr/local/bin/jq -r '.contexts[] | select(.name==\"" & curcontext & "\") | .context.cluster'"set curcluster to resultdo shell script "/usr/local/bin/kubectl config view -o json | /usr/local/bin/jq -r '.contexts[] | select(.name==\"" & curcontext & "\") | .context.namespace'"set curnamespace to resultdo shell script "echo \"" & curnamespace & "\" | cut -f1 -d\"-\""set curproject to resulttry	do shell script "/usr/local/bin/kubectl get namespaces"on error errorMessage number errorNumber	display dialog "ERROR: Could not connect to cluster. Is VPN and bastion running?"end trydo shell script "/usr/local/bin/kubectl get --cluster " & curcluster & " namespaces | awk '{print $1}' | tail -n+2 | cut -f1 -d\"-\" | sort | uniq" # tail skips headersset projects to paragraphs of resultchoose from list projects with prompt "In cluster: " & curcluster with title "K8s Project Selector" default items {curproject}set newproject to resultif newproject is false then	returnend if-- build (assuming it exists)do shell script "echo \"" & curcontext & "\" | sed s/-" & curproject & "-/-" & newproject & "-/g"set newcontext to resultdo shell script "/usr/local/bin/kubectl config use-context " & newcontextdisplay dialog "Switched to " & newcontext buttons {"ok"} default button 1