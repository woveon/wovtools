use AppleScript version "2.4" -- Yosemite (10.10) or lateruse scripting additionsdo shell script "/usr/local/bin/kubectl config current-context"set curcontext to resultdo shell script "/usr/local/bin/kubectl config view -o json | /usr/local/bin/jq -r '.contexts[] | select(.name==\"" & curcontext & "\") | .context.cluster'"set curcluster to resultdo shell script "/usr/local/bin/kubectl config view -o json | /usr/local/bin/jq -r '.contexts[] | select(.name==\"" & curcontext & "\") | .context.namespace'"set curnamespace to resultdo shell script "/usr/local/bin/kubectl get --cluster " & curcluster & " namespaces | awk '{print $1}' | tail -n+2" # tail skips headersset namespaces to paragraphs of result-- display dialog "Select Context:" buttons {"Cancel", "l-app-dev", "l-api-dev"} default button 3choose from list namespaces with prompt "Select Namespace:" with title "K8s Cluster Selector" default items {curcluster}set newnamespace to resultif newnamespace is false then	returnend if-- build context from new cluser (assuming it exists)# do shell script "echo \"${curcontext}/${curcluster}/${newcluster}\""do shell script "echo \"" & curcontext & "\" | sed s/" & curnamespace & "/" & newnamespace & "/g"set newcontext to resultdo shell script "/usr/local/bin/kubectl config use-context " & newcontextdisplay dialog "Switched to " & newcontext buttons {"ok"} default button 1